# 月度核心数据看板升级 - 快速参考

## 🚀 快速开始

```bash
# 1. 运行升级工具
升级月度看板.bat

# 2. 阅读完整方案
月度核心数据看板完整实施方案.md

# 3. 开始实施
按照方案逐步添加代码
```

## 📋 升级清单

### ✅ 必须完成
- [ ] 备份现有文件
- [ ] 创建B端数据CSV
- [ ] 运行数据转换
- [ ] 添加同比计算代码
- [ ] 更新指标卡片显示
- [ ] 添加时间范围切换
- [ ] 实现B端数据展示
- [ ] 集成AI分析
- [ ] 集成小橙子助手
- [ ] 配置API密钥
- [ ] 完整测试

### 🎯 可选优化
- [ ] 添加数据导出
- [ ] 优化移动端显示
- [ ] 添加数据缓存
- [ ] 实现离线模式
- [ ] 添加用户设置

## 🔑 关键代码片段

### 1. 同比计算
```javascript
function getYoYData(currentData) {
    return monthlyData.find(d => 
        d.年份 === currentData.年份 - 1 && 
        d.月份 === currentData.月份
    );
}
```

### 2. 时间范围过滤
```javascript
function getFilteredData() {
    const months = parseInt(document.querySelector('.period-btn.active').dataset.months);
    return monthlyData.slice(Math.max(0, currentIndex - months + 1), currentIndex + 1);
}
```

### 3. AI分析调用
```javascript
const response = await fetch('https://api.deepseek.com/v1/chat/completions', {
    method: 'POST',
    headers: {
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
        model: 'deepseek-chat',
        messages: [...]
    })
});
```

## 📊 数据格式

### 月度核心数据.csv
```csv
年份,月份,月活,次月留存,营收,订单,ARPU,ARPPU,深度访问率,使用率,大会员活跃率
25年,1月,288582,43%,569695,6538,1.97,88.1,83%,63%,80%
```

### B端核心数据.csv
```csv
年份,月份,签约金额,开票金额,到款金额,订单数,新签,续签
25年,1月,45.6万,38.2万,42.1万,12,5,7
```

## 🎨 样式要点

### 配色
- 主色：`#ff7043`
- 背景：`#f5f5f5`
- 文字：`#333`

### 中国风格（红涨绿跌）
```css
.positive { color: #d32f2f; }  /* 红色 */
.negative { color: #388e3c; }  /* 绿色 */
```

## 🔧 API配置

### DeepSeek API
1. 获取API密钥：https://platform.deepseek.com/
2. 替换代码中的 `YOUR_API_KEY`
3. 测试连接

## 📱 响应式断点

- 桌面端：> 768px
- 移动端：≤ 768px

## 🐛 常见问题

### Q: 同比数据显示为null？
A: 确保有去年同月的数据（至少13个月数据）

### Q: AI分析不工作？
A: 检查API密钥是否正确配置

### Q: B端数据不显示？
A: 确保CSV文件存在且格式正确

### Q: 图表不显示？
A: 检查Chart.js是否加载成功

## 📚 相关文档

| 文档 | 用途 |
|------|------|
| 月度核心数据看板完整实施方案.md | 详细实施步骤和完整代码 |
| 月度核心数据看板升级说明.md | 升级概述和需求说明 |
| 核心数据看板（月度）/README.md | React版本参考 |
| 样式更新说明.md | 统一看板样式说明 |

## ⚡ 快速测试

```bash
# 1. 更新数据
更新数据.bat

# 2. 完整测试
完整测试-v2.bat

# 3. 打开看板
index.html
```

## 🎯 验收标准

### 功能验收
- [x] 核心指标显示环比和同比
- [x] 趋势图支持3/6/12月切换
- [x] 只显示月活、营收、留存率三个图表
- [x] B端数据正确显示
- [x] AI分析功能正常
- [x] 小橙子助手可以对话

### 视觉验收
- [x] 样式与周度看板一致
- [x] 红涨绿跌颜色正确
- [x] 移动端显示正常
- [x] 小橙子图片显示完整

### 性能验收
- [x] 页面加载速度 < 3秒
- [x] 图表渲染流畅
- [x] AI响应时间 < 5秒

## 💡 实施建议

### 分步实施
1. **第一阶段**：同比数据 + 时间范围切换（1-2小时）
2. **第二阶段**：B端数据展示（30分钟）
3. **第三阶段**：AI分析集成（1小时）
4. **第四阶段**：小橙子助手（1-2小时）
5. **第五阶段**：测试优化（1小时）

### 测试策略
- 每完成一个功能立即测试
- 使用真实数据测试
- 测试边界情况
- 多浏览器测试

## 🆘 获取帮助

遇到问题时：
1. 查看完整实施方案文档
2. 检查浏览器控制台错误
3. 参考周度看板实现
4. 查看React版本代码

---

**祝升级顺利！🎉**
