{"ast":null,"code":"var _jsxFileName = \"E:\\\\\\u6A59\\u5B50\\u5B66\\u6570\\u636E\\u770B\\u677F\\\\\\u6708\\u6570\\u636E\\u770B\\u677F\\\\src\\\\components\\\\AIAnalysis.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { testDeepSeekAPI, testDataAnalysis } from '../utils/testAPI';\nimport './AIAnalysis.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AIAnalysis = ({\n  currentData,\n  allData,\n  selectedMonth\n}) => {\n  _s();\n  const [analysis, setAnalysis] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [testResult, setTestResult] = useState(null);\n  useEffect(() => {\n    if (currentData && allData.length > 0) {\n      generateAnalysis();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentData, selectedMonth]);\n  const testAPI = async () => {\n    const apiKey = process.env.REACT_APP_API_KEY;\n    if (!apiKey || apiKey === 'sk-your-actual-deepseek-api-key-here') {\n      setTestResult({\n        success: false,\n        message: 'ËØ∑ÂÖàÂú®.envÊñá‰ª∂‰∏≠ÈÖçÁΩÆÊúâÊïàÁöÑAPIÂØÜÈí•'\n      });\n      return;\n    }\n    setLoading(true);\n    setTestResult(null);\n    try {\n      // Âü∫Á°ÄËøûÊé•ÊµãËØï\n      console.log('üîç ÂºÄÂßãAPIÊµãËØï...');\n      const basicTest = await testDeepSeekAPI(apiKey);\n      if (basicTest.success) {\n        // Êï∞ÊçÆÂàÜÊûêÂäüËÉΩÊµãËØï\n        const analysisTest = await testDataAnalysis(apiKey, currentData);\n        setTestResult(analysisTest);\n      } else {\n        setTestResult(basicTest);\n      }\n    } catch (error) {\n      setTestResult({\n        success: false,\n        message: 'ÊµãËØïËøáÁ®ã‰∏≠ÂèëÁîüÈîôËØØ',\n        error: error.message\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const generateAnalysis = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      // ÂáÜÂ§áÂàÜÊûêÊï∞ÊçÆ\n      const [currentYear, currentMonth] = selectedMonth.split('-').map(Number);\n\n      // Ëé∑ÂèñÊúÄËøë3‰∏™ÊúàÊï∞ÊçÆÁî®‰∫éË∂ãÂäøÂàÜÊûê\n      const currentIndex = allData.findIndex(row => row.Âπ¥‰ªΩ === currentYear && row.Êúà‰ªΩ === currentMonth);\n      const recentData = allData.slice(Math.max(0, currentIndex - 2), currentIndex + 1);\n\n      // Ëé∑Âèñ‰∏äÊúàÂíåÂéªÂπ¥ÂêåÊúüÊï∞ÊçÆ\n      const lastMonthData = allData.find(row => {\n        if (currentMonth === 1) {\n          return row.Âπ¥‰ªΩ === currentYear - 1 && row.Êúà‰ªΩ === 12;\n        }\n        return row.Âπ¥‰ªΩ === currentYear && row.Êúà‰ªΩ === currentMonth - 1;\n      });\n      const lastYearData = allData.find(row => row.Âπ¥‰ªΩ === currentYear - 1 && row.Êúà‰ªΩ === currentMonth);\n\n      // ÊûÑÂª∫ÂàÜÊûêÊèêÁ§∫ËØç\n      const prompt = `\n‰Ωú‰∏∫Êï∞ÊçÆÂàÜÊûê‰∏ìÂÆ∂ÔºåËØ∑ÂàÜÊûê‰ª•‰∏ãÊúàÂ∫¶Ê†∏ÂøÉÊï∞ÊçÆÔºö\n\nÂΩìÂâçÊúà‰ªΩÔºö${currentYear + 2000}Âπ¥${currentMonth}Êúà\nÂΩìÂâçÊï∞ÊçÆÔºö\n- ÊúàÊ¥ªÔºö${currentData.ÊúàÊ¥ª.toLocaleString()}\n- Ê¨°ÊúàÁïôÂ≠òÔºö${currentData.Ê¨°ÊúàÁïôÂ≠ò}%\n- Ëê•Êî∂Ôºö${currentData.Ëê•Êî∂.toLocaleString()}\n- ËÆ¢ÂçïÔºö${currentData.ËÆ¢Âçï.toLocaleString()}\n- ARPUÔºö${currentData.ARPU}\n- ARPPUÔºö${currentData.ARPPU}\n- Ê∑±Â∫¶ËÆøÈóÆÁéáÔºö${currentData.Ê∑±Â∫¶ËÆøÈóÆÁéá}%\n- ‰ΩøÁî®ÁéáÔºö${currentData.‰ΩøÁî®Áéá}%\n- Â§ß‰ºöÂëòÊ¥ªË∑ÉÁéáÔºö${currentData.Â§ß‰ºöÂëòÊ¥ªË∑ÉÁéá}%\n\n${lastMonthData ? `‰∏äÊúàÂØπÊØîÔºö\n- ÊúàÊ¥ªÁéØÊØîÔºö${((currentData.ÊúàÊ¥ª - lastMonthData.ÊúàÊ¥ª) / lastMonthData.ÊúàÊ¥ª * 100).toFixed(2)}%\n- Ëê•Êî∂ÁéØÊØîÔºö${((currentData.Ëê•Êî∂ - lastMonthData.Ëê•Êî∂) / lastMonthData.Ëê•Êî∂ * 100).toFixed(2)}%\n- ARPUÁéØÊØîÔºö${((currentData.ARPU - lastMonthData.ARPU) / lastMonthData.ARPU * 100).toFixed(2)}%` : ''}\n\n${lastYearData ? `ÂéªÂπ¥ÂêåÊúüÂØπÊØîÔºö\n- ÊúàÊ¥ªÂêåÊØîÔºö${((currentData.ÊúàÊ¥ª - lastYearData.ÊúàÊ¥ª) / lastYearData.ÊúàÊ¥ª * 100).toFixed(2)}%\n- Ëê•Êî∂ÂêåÊØîÔºö${((currentData.Ëê•Êî∂ - lastYearData.Ëê•Êî∂) / lastYearData.Ëê•Êî∂ * 100).toFixed(2)}%\n- ARPUÂêåÊØîÔºö${((currentData.ARPU - lastYearData.ARPU) / lastYearData.ARPU * 100).toFixed(2)}%` : ''}\n\nÊúÄËøë3‰∏™ÊúàË∂ãÂäøÔºö\n${recentData.map(row => `${row.Âπ¥‰ªΩ + 2000}Âπ¥${row.Êúà‰ªΩ}Êúà - ÊúàÊ¥ª:${row.ÊúàÊ¥ª.toLocaleString()}, Ëê•Êî∂:${row.Ëê•Êî∂.toLocaleString()}, ARPU:${row.ARPU}`).join('\\n')}\n\nËØ∑‰∏•Ê†ºÊåâÁÖß‰ª•‰∏ãJSONÊ†ºÂºèËøîÂõûÂàÜÊûêÁªìÊûúÔºå‰∏çË¶ÅÂåÖÂê´‰ªª‰ΩïÂÖ∂‰ªñÊñáÂ≠óÔºö\n{\n  \"keyChanges\": \"ÂÖ≥ÈîÆÂèòÂåñÂàÜÊûêÂÜÖÂÆπÔºà50Â≠ó‰ª•ÂÜÖÔºâ\",\n  \"trends\": \"Â¢ûÈïøË∂ãÂäøÂàÜÊûêÂÜÖÂÆπÔºà50Â≠ó‰ª•ÂÜÖÔºâ\", \n  \"suggestions\": [\"Âª∫ËÆÆ1\", \"Âª∫ËÆÆ2\", \"Âª∫ËÆÆ3\"]\n}\n`;\n      const response = await axios.post('https://api.deepseek.com/v1/chat/completions', {\n        model: 'deepseek-chat',\n        messages: [{\n          role: 'user',\n          content: prompt\n        }],\n        temperature: 0.7,\n        max_tokens: 500\n      }, {\n        headers: {\n          'Authorization': `Bearer ${process.env.REACT_APP_API_KEY}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const aiResponse = response.data.choices[0].message.content;\n      try {\n        // Â∞ùËØïËß£ÊûêJSONÂìçÂ∫î\n        const parsedResponse = JSON.parse(aiResponse);\n        setAnalysis(parsedResponse);\n      } catch (parseError) {\n        // Â¶ÇÊûúËß£ÊûêÂ§±Ë¥•Ôºå‰ΩøÁî®Â§áÁî®ÂàÜÊûê\n        console.warn('AIÂìçÂ∫îËß£ÊûêÂ§±Ë¥•Ôºå‰ΩøÁî®Â§áÁî®ÂàÜÊûê');\n        const fallbackAnalysis = generateFallbackAnalysis();\n        setAnalysis(fallbackAnalysis);\n      }\n    } catch (err) {\n      console.error('AIÂàÜÊûêÂ§±Ë¥•:', err);\n      setError('AIÂàÜÊûêÊúçÂä°ÊöÇÊó∂‰∏çÂèØÁî®ÔºåËØ∑Á®çÂêéÈáçËØï');\n\n      // Êèê‰æõÂ§áÁî®ÂàÜÊûê\n      const fallbackAnalysis = generateFallbackAnalysis();\n      setAnalysis(fallbackAnalysis);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const generateFallbackAnalysis = () => {\n    if (!currentData) return {\n      keyChanges: '',\n      trends: '',\n      suggestions: []\n    };\n    const [currentYear, currentMonth] = selectedMonth.split('-').map(Number);\n    const lastMonthData = allData.find(row => {\n      if (currentMonth === 1) {\n        return row.Âπ¥‰ªΩ === currentYear - 1 && row.Êúà‰ªΩ === 12;\n      }\n      return row.Âπ¥‰ªΩ === currentYear && row.Êúà‰ªΩ === currentMonth - 1;\n    });\n    let keyChanges = `Êú¨ÊúàÊúàÊ¥ª${currentData.ÊúàÊ¥ª.toLocaleString()}Ôºå`;\n    let trends = `Êï∞ÊçÆË°®Áé∞`;\n    let suggestions = [];\n    if (lastMonthData) {\n      const userChange = ((currentData.ÊúàÊ¥ª - lastMonthData.ÊúàÊ¥ª) / lastMonthData.ÊúàÊ¥ª * 100).toFixed(1);\n      const revenueChange = ((currentData.Ëê•Êî∂ - lastMonthData.Ëê•Êî∂) / lastMonthData.Ëê•Êî∂ * 100).toFixed(1);\n      keyChanges += `ÁéØÊØî${userChange > 0 ? 'Â¢ûÈïø' : '‰∏ãÈôç'}${Math.abs(userChange)}%ÔºåËê•Êî∂${revenueChange > 0 ? 'Â¢ûÈïø' : '‰∏ãÈôç'}${Math.abs(revenueChange)}%`;\n    }\n    if (currentData.Ê¨°ÊúàÁïôÂ≠ò >= 40) {\n      trends += `ËâØÂ•ΩÔºåÁïôÂ≠òÁéá${currentData.Ê¨°ÊúàÁïôÂ≠ò}%Ôºå‰ΩøÁî®Áéá${currentData.‰ΩøÁî®Áéá}%`;\n    } else {\n      trends += `ÈúÄÂÖ≥Ê≥®ÔºåÁïôÂ≠òÁéá${currentData.Ê¨°ÊúàÁïôÂ≠ò}%ÂÅè‰Ωé`;\n    }\n    suggestions = ['Âä†Âº∫Áî®Êà∑Ê¥ªË∑ÉÂ∫¶ËøêËê•', '‰ºòÂåñ‰∫ßÂìÅÂäüËÉΩ‰ΩìÈ™å', 'ÊèêÂçá‰ªòË¥πËΩ¨ÂåñÊïàÁéá'];\n    return {\n      keyChanges,\n      trends,\n      suggestions\n    };\n  };\n  if (!currentData) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ai-analysis\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"ai-header\",\n        children: \"AI \\u6570\\u636E\\u5206\\u6790\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"analysis-content\",\n        children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"analysis-loading\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"AI\\u6B63\\u5728\\u5206\\u6790\\u6570\\u636E...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"analysis-error\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this), analysis && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"analysis-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"analysis-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"analysis-section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"analysis-section-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"analysis-section-title\",\n                children: \"\\u6838\\u5FC3\\u8868\\u73B0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"analysis-section-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"\\u6D3B\\u8DC3\\u7528\\u6237\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '20px',\n                  fontWeight: '600',\n                  color: '#FF6B35',\n                  margin: '4px 0'\n                },\n                children: currentData.ÊúàÊ¥ª.toLocaleString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"\\u8425\\u6536\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '20px',\n                  fontWeight: '600',\n                  color: '#FF6B35',\n                  margin: '4px 0'\n                },\n                children: [(currentData.Ëê•Êî∂ / 10000).toFixed(1), \"\\u4E07\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"analysis-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"analysis-section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"analysis-section-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"analysis-section-title\",\n                children: \"\\u5173\\u952E\\u53D8\\u5316\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"analysis-section-content\",\n              children: analysis.keyChanges || 'ÊöÇÊó†Êï∞ÊçÆ'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"analysis-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"analysis-section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"analysis-section-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"analysis-section-title\",\n                children: \"\\u7B56\\u7565\\u5EFA\\u8BAE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"analysis-section-content\",\n              children: Array.isArray(analysis.suggestions) ? /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: analysis.suggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: suggestion\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: analysis.suggestions || 'ÊöÇÊó†Âª∫ËÆÆ'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"analysis-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"footer-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: testAPI,\n            disabled: loading,\n            className: \"test-btn\",\n            children: loading ? 'ÊµãËØï‰∏≠...' : 'üß™ ÊµãËØïAPI'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: generateAnalysis,\n            disabled: loading,\n            className: \"refresh-btn\",\n            children: loading ? 'ÂàÜÊûê‰∏≠...' : 'ü§ñ AIÂàÜÊûê'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"analysis-note\",\n          children: \"\\u7531 DeepSeek AI \\u63D0\\u4F9B\\u5206\\u6790\\u652F\\u6301\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), testResult && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `test-result ${testResult.success ? 'success' : 'error'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: testResult.success ? '‚úÖ ÊµãËØïÊàêÂäü' : '‚ùå ÊµãËØïÂ§±Ë¥•'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: testResult.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }, this), testResult.data && /*#__PURE__*/_jsxDEV(\"pre\", {\n          children: JSON.stringify(testResult.data, null, 2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 15\n        }, this), testResult.rawResponse && /*#__PURE__*/_jsxDEV(\"details\", {\n          children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n            children: \"\\u67E5\\u770B\\u539F\\u59CB\\u54CD\\u5E94\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n            children: testResult.rawResponse\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 198,\n    columnNumber: 5\n  }, this);\n};\n_s(AIAnalysis, \"FOSCe8PSNGM9mB3Hl1w9NcZPJmg=\");\n_c = AIAnalysis;\nexport default AIAnalysis;\nvar _c;\n$RefreshReg$(_c, \"AIAnalysis\");","map":{"version":3,"names":["React","useState","useEffect","axios","testDeepSeekAPI","testDataAnalysis","jsxDEV","_jsxDEV","AIAnalysis","currentData","allData","selectedMonth","_s","analysis","setAnalysis","loading","setLoading","error","setError","testResult","setTestResult","length","generateAnalysis","testAPI","apiKey","process","env","REACT_APP_API_KEY","success","message","console","log","basicTest","analysisTest","currentYear","currentMonth","split","map","Number","currentIndex","findIndex","row","Âπ¥‰ªΩ","Êúà‰ªΩ","recentData","slice","Math","max","lastMonthData","find","lastYearData","prompt","ÊúàÊ¥ª","toLocaleString","Ê¨°ÊúàÁïôÂ≠ò","Ëê•Êî∂","ËÆ¢Âçï","ARPU","ARPPU","Ê∑±Â∫¶ËÆøÈóÆÁéá","‰ΩøÁî®Áéá","Â§ß‰ºöÂëòÊ¥ªË∑ÉÁéá","toFixed","join","response","post","model","messages","role","content","temperature","max_tokens","headers","aiResponse","data","choices","parsedResponse","JSON","parse","parseError","warn","fallbackAnalysis","generateFallbackAnalysis","err","keyChanges","trends","suggestions","userChange","revenueChange","abs","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","fontSize","fontWeight","color","margin","Array","isArray","suggestion","index","onClick","disabled","stringify","rawResponse","_c","$RefreshReg$"],"sources":["E:/Ê©ôÂ≠êÂ≠¶Êï∞ÊçÆÁúãÊùø/ÊúàÊï∞ÊçÆÁúãÊùø/src/components/AIAnalysis.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { testDeepSeekAPI, testDataAnalysis } from '../utils/testAPI';\r\nimport './AIAnalysis.css';\r\n\r\nconst AIAnalysis = ({ currentData, allData, selectedMonth }) => {\r\n  const [analysis, setAnalysis] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [testResult, setTestResult] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (currentData && allData.length > 0) {\r\n      generateAnalysis();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentData, selectedMonth]);\r\n\r\n  const testAPI = async () => {\r\n    const apiKey = process.env.REACT_APP_API_KEY;\r\n    \r\n    if (!apiKey || apiKey === 'sk-your-actual-deepseek-api-key-here') {\r\n      setTestResult({\r\n        success: false,\r\n        message: 'ËØ∑ÂÖàÂú®.envÊñá‰ª∂‰∏≠ÈÖçÁΩÆÊúâÊïàÁöÑAPIÂØÜÈí•'\r\n      });\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setTestResult(null);\r\n    \r\n    try {\r\n      // Âü∫Á°ÄËøûÊé•ÊµãËØï\r\n      console.log('üîç ÂºÄÂßãAPIÊµãËØï...');\r\n      const basicTest = await testDeepSeekAPI(apiKey);\r\n      \r\n      if (basicTest.success) {\r\n        // Êï∞ÊçÆÂàÜÊûêÂäüËÉΩÊµãËØï\r\n        const analysisTest = await testDataAnalysis(apiKey, currentData);\r\n        setTestResult(analysisTest);\r\n      } else {\r\n        setTestResult(basicTest);\r\n      }\r\n    } catch (error) {\r\n      setTestResult({\r\n        success: false,\r\n        message: 'ÊµãËØïËøáÁ®ã‰∏≠ÂèëÁîüÈîôËØØ',\r\n        error: error.message\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateAnalysis = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      // ÂáÜÂ§áÂàÜÊûêÊï∞ÊçÆ\r\n      const [currentYear, currentMonth] = selectedMonth.split('-').map(Number);\r\n      \r\n      // Ëé∑ÂèñÊúÄËøë3‰∏™ÊúàÊï∞ÊçÆÁî®‰∫éË∂ãÂäøÂàÜÊûê\r\n      const currentIndex = allData.findIndex(row => row.Âπ¥‰ªΩ === currentYear && row.Êúà‰ªΩ === currentMonth);\r\n      const recentData = allData.slice(Math.max(0, currentIndex - 2), currentIndex + 1);\r\n      \r\n      // Ëé∑Âèñ‰∏äÊúàÂíåÂéªÂπ¥ÂêåÊúüÊï∞ÊçÆ\r\n      const lastMonthData = allData.find(row => {\r\n        if (currentMonth === 1) {\r\n          return row.Âπ¥‰ªΩ === currentYear - 1 && row.Êúà‰ªΩ === 12;\r\n        }\r\n        return row.Âπ¥‰ªΩ === currentYear && row.Êúà‰ªΩ === currentMonth - 1;\r\n      });\r\n      \r\n      const lastYearData = allData.find(row => \r\n        row.Âπ¥‰ªΩ === currentYear - 1 && row.Êúà‰ªΩ === currentMonth\r\n      );\r\n\r\n      // ÊûÑÂª∫ÂàÜÊûêÊèêÁ§∫ËØç\r\n      const prompt = `\r\n‰Ωú‰∏∫Êï∞ÊçÆÂàÜÊûê‰∏ìÂÆ∂ÔºåËØ∑ÂàÜÊûê‰ª•‰∏ãÊúàÂ∫¶Ê†∏ÂøÉÊï∞ÊçÆÔºö\r\n\r\nÂΩìÂâçÊúà‰ªΩÔºö${currentYear + 2000}Âπ¥${currentMonth}Êúà\r\nÂΩìÂâçÊï∞ÊçÆÔºö\r\n- ÊúàÊ¥ªÔºö${currentData.ÊúàÊ¥ª.toLocaleString()}\r\n- Ê¨°ÊúàÁïôÂ≠òÔºö${currentData.Ê¨°ÊúàÁïôÂ≠ò}%\r\n- Ëê•Êî∂Ôºö${currentData.Ëê•Êî∂.toLocaleString()}\r\n- ËÆ¢ÂçïÔºö${currentData.ËÆ¢Âçï.toLocaleString()}\r\n- ARPUÔºö${currentData.ARPU}\r\n- ARPPUÔºö${currentData.ARPPU}\r\n- Ê∑±Â∫¶ËÆøÈóÆÁéáÔºö${currentData.Ê∑±Â∫¶ËÆøÈóÆÁéá}%\r\n- ‰ΩøÁî®ÁéáÔºö${currentData.‰ΩøÁî®Áéá}%\r\n- Â§ß‰ºöÂëòÊ¥ªË∑ÉÁéáÔºö${currentData.Â§ß‰ºöÂëòÊ¥ªË∑ÉÁéá}%\r\n\r\n${lastMonthData ? `‰∏äÊúàÂØπÊØîÔºö\r\n- ÊúàÊ¥ªÁéØÊØîÔºö${((currentData.ÊúàÊ¥ª - lastMonthData.ÊúàÊ¥ª) / lastMonthData.ÊúàÊ¥ª * 100).toFixed(2)}%\r\n- Ëê•Êî∂ÁéØÊØîÔºö${((currentData.Ëê•Êî∂ - lastMonthData.Ëê•Êî∂) / lastMonthData.Ëê•Êî∂ * 100).toFixed(2)}%\r\n- ARPUÁéØÊØîÔºö${((currentData.ARPU - lastMonthData.ARPU) / lastMonthData.ARPU * 100).toFixed(2)}%` : ''}\r\n\r\n${lastYearData ? `ÂéªÂπ¥ÂêåÊúüÂØπÊØîÔºö\r\n- ÊúàÊ¥ªÂêåÊØîÔºö${((currentData.ÊúàÊ¥ª - lastYearData.ÊúàÊ¥ª) / lastYearData.ÊúàÊ¥ª * 100).toFixed(2)}%\r\n- Ëê•Êî∂ÂêåÊØîÔºö${((currentData.Ëê•Êî∂ - lastYearData.Ëê•Êî∂) / lastYearData.Ëê•Êî∂ * 100).toFixed(2)}%\r\n- ARPUÂêåÊØîÔºö${((currentData.ARPU - lastYearData.ARPU) / lastYearData.ARPU * 100).toFixed(2)}%` : ''}\r\n\r\nÊúÄËøë3‰∏™ÊúàË∂ãÂäøÔºö\r\n${recentData.map(row => `${row.Âπ¥‰ªΩ + 2000}Âπ¥${row.Êúà‰ªΩ}Êúà - ÊúàÊ¥ª:${row.ÊúàÊ¥ª.toLocaleString()}, Ëê•Êî∂:${row.Ëê•Êî∂.toLocaleString()}, ARPU:${row.ARPU}`).join('\\n')}\r\n\r\nËØ∑‰∏•Ê†ºÊåâÁÖß‰ª•‰∏ãJSONÊ†ºÂºèËøîÂõûÂàÜÊûêÁªìÊûúÔºå‰∏çË¶ÅÂåÖÂê´‰ªª‰ΩïÂÖ∂‰ªñÊñáÂ≠óÔºö\r\n{\r\n  \"keyChanges\": \"ÂÖ≥ÈîÆÂèòÂåñÂàÜÊûêÂÜÖÂÆπÔºà50Â≠ó‰ª•ÂÜÖÔºâ\",\r\n  \"trends\": \"Â¢ûÈïøË∂ãÂäøÂàÜÊûêÂÜÖÂÆπÔºà50Â≠ó‰ª•ÂÜÖÔºâ\", \r\n  \"suggestions\": [\"Âª∫ËÆÆ1\", \"Âª∫ËÆÆ2\", \"Âª∫ËÆÆ3\"]\r\n}\r\n`;\r\n\r\n      const response = await axios.post('https://api.deepseek.com/v1/chat/completions', {\r\n        model: 'deepseek-chat',\r\n        messages: [\r\n          {\r\n            role: 'user',\r\n            content: prompt\r\n          }\r\n        ],\r\n        temperature: 0.7,\r\n        max_tokens: 500\r\n      }, {\r\n        headers: {\r\n          'Authorization': `Bearer ${process.env.REACT_APP_API_KEY}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      const aiResponse = response.data.choices[0].message.content;\r\n      \r\n      try {\r\n        // Â∞ùËØïËß£ÊûêJSONÂìçÂ∫î\r\n        const parsedResponse = JSON.parse(aiResponse);\r\n        setAnalysis(parsedResponse);\r\n      } catch (parseError) {\r\n        // Â¶ÇÊûúËß£ÊûêÂ§±Ë¥•Ôºå‰ΩøÁî®Â§áÁî®ÂàÜÊûê\r\n        console.warn('AIÂìçÂ∫îËß£ÊûêÂ§±Ë¥•Ôºå‰ΩøÁî®Â§áÁî®ÂàÜÊûê');\r\n        const fallbackAnalysis = generateFallbackAnalysis();\r\n        setAnalysis(fallbackAnalysis);\r\n      }\r\n    } catch (err) {\r\n      console.error('AIÂàÜÊûêÂ§±Ë¥•:', err);\r\n      setError('AIÂàÜÊûêÊúçÂä°ÊöÇÊó∂‰∏çÂèØÁî®ÔºåËØ∑Á®çÂêéÈáçËØï');\r\n      \r\n      // Êèê‰æõÂ§áÁî®ÂàÜÊûê\r\n      const fallbackAnalysis = generateFallbackAnalysis();\r\n      setAnalysis(fallbackAnalysis);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateFallbackAnalysis = () => {\r\n    if (!currentData) return { keyChanges: '', trends: '', suggestions: [] };\r\n\r\n    const [currentYear, currentMonth] = selectedMonth.split('-').map(Number);\r\n    const lastMonthData = allData.find(row => {\r\n      if (currentMonth === 1) {\r\n        return row.Âπ¥‰ªΩ === currentYear - 1 && row.Êúà‰ªΩ === 12;\r\n      }\r\n      return row.Âπ¥‰ªΩ === currentYear && row.Êúà‰ªΩ === currentMonth - 1;\r\n    });\r\n\r\n    let keyChanges = `Êú¨ÊúàÊúàÊ¥ª${currentData.ÊúàÊ¥ª.toLocaleString()}Ôºå`;\r\n    let trends = `Êï∞ÊçÆË°®Áé∞`;\r\n    let suggestions = [];\r\n    \r\n    if (lastMonthData) {\r\n      const userChange = ((currentData.ÊúàÊ¥ª - lastMonthData.ÊúàÊ¥ª) / lastMonthData.ÊúàÊ¥ª * 100).toFixed(1);\r\n      const revenueChange = ((currentData.Ëê•Êî∂ - lastMonthData.Ëê•Êî∂) / lastMonthData.Ëê•Êî∂ * 100).toFixed(1);\r\n      \r\n      keyChanges += `ÁéØÊØî${userChange > 0 ? 'Â¢ûÈïø' : '‰∏ãÈôç'}${Math.abs(userChange)}%ÔºåËê•Êî∂${revenueChange > 0 ? 'Â¢ûÈïø' : '‰∏ãÈôç'}${Math.abs(revenueChange)}%`;\r\n    }\r\n    \r\n    if (currentData.Ê¨°ÊúàÁïôÂ≠ò >= 40) {\r\n      trends += `ËâØÂ•ΩÔºåÁïôÂ≠òÁéá${currentData.Ê¨°ÊúàÁïôÂ≠ò}%Ôºå‰ΩøÁî®Áéá${currentData.‰ΩøÁî®Áéá}%`;\r\n    } else {\r\n      trends += `ÈúÄÂÖ≥Ê≥®ÔºåÁïôÂ≠òÁéá${currentData.Ê¨°ÊúàÁïôÂ≠ò}%ÂÅè‰Ωé`;\r\n    }\r\n    \r\n    suggestions = [\r\n      'Âä†Âº∫Áî®Êà∑Ê¥ªË∑ÉÂ∫¶ËøêËê•',\r\n      '‰ºòÂåñ‰∫ßÂìÅÂäüËÉΩ‰ΩìÈ™å', \r\n      'ÊèêÂçá‰ªòË¥πËΩ¨ÂåñÊïàÁéá'\r\n    ];\r\n\r\n    return { keyChanges, trends, suggestions };\r\n  };\r\n\r\n  if (!currentData) return null;\r\n\r\n  return (\r\n    <div className=\"ai-analysis\">\r\n      <div className=\"card\">\r\n        <h2 className=\"ai-header\">AI Êï∞ÊçÆÂàÜÊûê</h2>\r\n        \r\n        <div className=\"analysis-content\">\r\n          {loading && (\r\n            <div className=\"analysis-loading\">\r\n              <div className=\"loading-spinner\"></div>\r\n              <p>AIÊ≠£Âú®ÂàÜÊûêÊï∞ÊçÆ...</p>\r\n            </div>\r\n          )}\r\n          \r\n          {error && (\r\n            <div className=\"analysis-error\">\r\n              <p>{error}</p>\r\n            </div>\r\n          )}\r\n          \r\n          {analysis && !loading && (\r\n            <div className=\"analysis-grid\">\r\n              <div className=\"analysis-section\">\r\n                <div className=\"analysis-section-header\">\r\n                  <div className=\"analysis-section-icon\"></div>\r\n                  <h3 className=\"analysis-section-title\">Ê†∏ÂøÉË°®Áé∞</h3>\r\n                </div>\r\n                <div className=\"analysis-section-content\">\r\n                  <div>Ê¥ªË∑ÉÁî®Êà∑</div>\r\n                  <div style={{fontSize: '20px', fontWeight: '600', color: '#FF6B35', margin: '4px 0'}}>\r\n                    {currentData.ÊúàÊ¥ª.toLocaleString()}\r\n                  </div>\r\n                  <div>Ëê•Êî∂</div>\r\n                  <div style={{fontSize: '20px', fontWeight: '600', color: '#FF6B35', margin: '4px 0'}}>\r\n                    {(currentData.Ëê•Êî∂ / 10000).toFixed(1)}‰∏á\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"analysis-section\">\r\n                <div className=\"analysis-section-header\">\r\n                  <div className=\"analysis-section-icon\"></div>\r\n                  <h3 className=\"analysis-section-title\">ÂÖ≥ÈîÆÂèòÂåñ</h3>\r\n                </div>\r\n                <div className=\"analysis-section-content\">\r\n                  {analysis.keyChanges || 'ÊöÇÊó†Êï∞ÊçÆ'}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"analysis-section\">\r\n                <div className=\"analysis-section-header\">\r\n                  <div className=\"analysis-section-icon\"></div>\r\n                  <h3 className=\"analysis-section-title\">Á≠ñÁï•Âª∫ËÆÆ</h3>\r\n                </div>\r\n                <div className=\"analysis-section-content\">\r\n                  {Array.isArray(analysis.suggestions) ? (\r\n                    <ul>\r\n                      {analysis.suggestions.map((suggestion, index) => (\r\n                        <li key={index}>{suggestion}</li>\r\n                      ))}\r\n                    </ul>\r\n                  ) : (\r\n                    <div>{analysis.suggestions || 'ÊöÇÊó†Âª∫ËÆÆ'}</div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"analysis-footer\">\r\n          <div className=\"footer-buttons\">\r\n            <button \r\n              onClick={testAPI} \r\n              disabled={loading}\r\n              className=\"test-btn\"\r\n            >\r\n              {loading ? 'ÊµãËØï‰∏≠...' : 'üß™ ÊµãËØïAPI'}\r\n            </button>\r\n            <button \r\n              onClick={generateAnalysis} \r\n              disabled={loading}\r\n              className=\"refresh-btn\"\r\n            >\r\n              {loading ? 'ÂàÜÊûê‰∏≠...' : 'ü§ñ AIÂàÜÊûê'}\r\n            </button>\r\n          </div>\r\n          <span className=\"analysis-note\">\r\n            Áî± DeepSeek AI Êèê‰æõÂàÜÊûêÊîØÊåÅ\r\n          </span>\r\n        </div>\r\n        \r\n        {testResult && (\r\n          <div className={`test-result ${testResult.success ? 'success' : 'error'}`}>\r\n            <h4>{testResult.success ? '‚úÖ ÊµãËØïÊàêÂäü' : '‚ùå ÊµãËØïÂ§±Ë¥•'}</h4>\r\n            <p>{testResult.message}</p>\r\n            {testResult.data && (\r\n              <pre>{JSON.stringify(testResult.data, null, 2)}</pre>\r\n            )}\r\n            {testResult.rawResponse && (\r\n              <details>\r\n                <summary>Êü•ÁúãÂéüÂßãÂìçÂ∫î</summary>\r\n                <pre>{testResult.rawResponse}</pre>\r\n              </details>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AIAnalysis;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}