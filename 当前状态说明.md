# 数据看板当前状态说明

## ✅ 已完成的工作

### 1. 统一入口页面
- 创建了 `index.html` 作为主入口
- 实现了周度/月度切换功能
- 实现了不同看板的筛选切换
- 使用 iframe 方式加载各个子看板

### 2. 数据加载修复
- **搜索数据看板（周度）**: 已修复 CSV 文件名匹配问题，添加了静默错误处理
- **各模块渗透率看板（月度）**: 已配置使用内置数据，即使 CSV 加载失败也能正常显示

### 3. 项目结构
```
橙子学数据看板/
├── index.html                          # 主入口页面
├── dashboard.css                       # 主样式文件
├── dashboard.js                        # 主交互逻辑
├── vercel.json                         # Vercel 部署配置
├── .gitignore                          # Git 忽略文件
├── test-local.html                     # 本地测试页面（新增）
├── 核心数据看板（周度）/
│   └── index.html
├── 搜索数据看板（周度）/
│   ├── index.html
│   ├── app.js                          # 已修复 CSV 文件名
│   └── *.csv                           # 数据文件
├── 核心数据看板（月度）/
│   └── public/
│       └── index.html                  # React 应用（需要构建）
└── 各模块渗透率看板（月度）/
    ├── index.html
    ├── script.js                       # 已配置内置数据
    └── 各模块渗透率.csv

```

## 🔧 本地测试

### 方法1: 使用测试页面
1. 打开 `test-local.html` 文件
2. 点击各个"加载看板"按钮
3. 查看每个看板是否正常加载

### 方法2: 使用本地服务器
```bash
# 使用 Python
python -m http.server 8000

# 或使用 Node.js (需要先安装 http-server)
npx http-server -p 8000

# 然后访问
http://localhost:8000
```

## 📦 部署到 Vercel

### 当前状态
- ✅ 本地 Git 仓库已初始化
- ✅ 所有文件已提交
- ❌ 无法推送到 GitHub（网络问题：端口 443 连接失败）

### 解决方案：直接使用 Vercel CLI 部署

#### 步骤1: 安装 Vercel CLI
```bash
npm install -g vercel
```

#### 步骤2: 登录 Vercel
```bash
vercel login
```
这会打开浏览器让你登录 Vercel 账号

#### 步骤3: 部署项目
```bash
# 在项目根目录执行
vercel

# 首次部署会询问：
# - Set up and deploy? 选择 Y
# - Which scope? 选择你的账号
# - Link to existing project? 选择 N
# - What's your project's name? 输入: czx-dashboard
# - In which directory is your code located? 直接回车（当前目录）
# - Want to override the settings? 选择 N
```

#### 步骤4: 生产环境部署
```bash
vercel --prod
```

## ⚠️ 已知问题

### 1. 网络连接问题
- 无法连接到 GitHub (端口 443)
- 建议使用 Vercel CLI 直接部署，跳过 GitHub

### 2. 月度核心数据看板
- 这是一个 React 应用，需要构建
- 当前在下拉选择器中标记为"需要构建"并禁用
- 如需启用，需要先运行构建命令

### 3. iframe 跨域问题
- 在本地文件系统中打开可能会遇到 CORS 问题
- 建议使用本地服务器测试（见上方"本地测试"部分）

## 🎯 下一步操作

### 选项A: 等待网络恢复后推送到 GitHub
1. 等待网络问题解决
2. 在 GitHub Desktop 中点击 "Push origin"
3. 在 Vercel 中连接 GitHub 仓库自动部署

### 选项B: 直接使用 Vercel CLI 部署（推荐）
1. 安装 Vercel CLI: `npm install -g vercel`
2. 登录: `vercel login`
3. 部署: `vercel --prod`
4. 完成！

## 📝 配置说明

### vercel.json
```json
{
  "routes": [
    {
      "src": "/搜索数据看板（周度）/(.*)",
      "dest": "/搜索数据看板（周度）/$1"
    },
    {
      "src": "/各模块渗透率看板（月度）/(.*)",
      "dest": "/各模块渗透率看板（月度）/$1"
    },
    {
      "src": "/核心数据看板（周度）/(.*)",
      "dest": "/核心数据看板（周度）/$1"
    },
    {
      "src": "/核心数据看板（月度）/(.*)",
      "dest": "/核心数据看板（月度）/$1"
    }
  ]
}
```

这个配置确保 Vercel 正确处理子目录中的文件请求。

## 💡 提示

1. **本地测试**: 使用 `test-local.html` 可以快速验证各个看板是否正常工作
2. **数据更新**: CSV 文件可以直接替换，无需修改代码
3. **样式调整**: 修改 `dashboard.css` 可以调整主页面样式
4. **功能扩展**: 修改 `dashboard.js` 可以添加新功能

## 📞 需要帮助？

如果遇到问题，请检查：
1. 浏览器控制台是否有错误信息
2. 网络请求是否成功（F12 -> Network 标签）
3. 文件路径是否正确
4. CSV 文件编码是否为 UTF-8
